<!DOCTYPE html>






  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.2.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="lamp环境搭建">
<meta name="keywords" content="web,lamp,php-fpm">
<meta property="og:type" content="article">
<meta property="og:title" content="lamp环境搭建">
<meta property="og:url" content="http://smartyhero.com/2018/07/24/lamp/index.html">
<meta property="og:site_name" content="无聊,放牛">
<meta property="og:description" content="lamp环境搭建">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-07-24T11:22:03.417Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="lamp环境搭建">
<meta name="twitter:description" content="lamp环境搭建">






  <link rel="canonical" href="http://smartyhero.com/2018/07/24/lamp/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>lamp环境搭建 | 无聊,放牛</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">无聊,放牛</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-主页"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-linux基础">
    <a href="/categories/linux基础" rel="section">
      <i class="menu-item-icon fa fa-fw fa-linux基础"></i> <br />linux基础</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-自动化运维">
    <a href="/categories/自动化运维" rel="section">
      <i class="menu-item-icon fa fa-fw fa-自动化运维"></i> <br />自动化运维</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-关于"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />公益 404</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smartyhero.com/2018/07/24/lamp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱大白">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/dabai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无聊,放牛">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">lamp环境搭建
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-24 19:19:31 / 修改时间：19:22:03" itemprop="dateCreated datePublished" datetime="2018-07-24T19:19:31+08:00">2018-07-24</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/web服务/" itemprop="url" rel="index"><span itemprop="name">web服务</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>lamp环境搭建</p>
<a id="more"></a>
<h3 id="1-下载软件包"><a href="#1-下载软件包" class="headerlink" title="1.下载软件包"></a>1.下载软件包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~]# cd /usr/local/src</span><br><span class="line">~]# wget http://mirrors.tuna.tsinghua.edu.cn/apache//httpd/httpd-2.4.33.tar.bz2</span><br><span class="line">~]# wget http://mirror.bit.edu.cn/apache//apr/apr-1.6.3.tar.gz</span><br><span class="line">~]# wget http://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br><span class="line">~]# wget http://cn.php.net/distributions/php-7.1.18.tar.bz2</span><br><span class="line">~]# wget http://xcache.lighttpd.net/pub/Releases/3.2.0/xcache-3.2.0.tar.bz2</span><br><span class="line">~]# wget http://hk1.php.net/get/php-5.6.36.tar.bz2/from/this/mirror</span><br><span class="line">~]# wget http://cn.php.net/distributions/php-5.6.36.tar.bz2</span><br><span class="line">~]# wget https://mirrors.tuna.tsinghua.edu.cn/mariadb//mariadb-10.2.15/bintar-linux-x86_64/mariadb-10.2.15-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="2-解压所有软件包"><a href="#2-解压所有软件包" class="headerlink" title="2.解压所有软件包"></a>2.解压所有软件包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# for line in `ls *.tar.*`;do tar xf $line; done</span><br></pre></td></tr></table></figure>
<h3 id="3-安装Apache"><a href="#3-安装Apache" class="headerlink" title="3.安装Apache"></a>3.安装Apache</h3><p><strong>1)将apr,apr-util复制到httpd源码目录中,方便一次编译 </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# mv apr-1.6.3 httpd-2.4.33/srclib/apr</span><br><span class="line">~]# mv apr-util-1.6.1 httpd-2.4.33/srclib/apr-util</span><br></pre></td></tr></table></figure></p>
<p><strong>2)安装依赖包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# yum install gcc pcre-devel openssl-devel expat-devel</span><br></pre></td></tr></table></figure>
<p><strong>3)创建用户,组</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# groupadd -r -g 80 httpd</span><br><span class="line">~]# useradd -r -g 80 -u 80 -s /sbin/nologin httpd</span><br></pre></td></tr></table></figure>
<p><strong>4)编译</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~]# cd httpd-2.4.33</span><br><span class="line">~]# ./configure --prefix=/usr/local/httpd-2.4.33 --sysconfdir=/etc/httpd24 --enable-so --enable-ssl --enable-cgi --enable-rewrite --enable-cache --enable-cache-disk --enable-file-cache --enable-cache-socache --enable-proxy --enable--connect --enable-session --enable-session-cookie --enable-session-crypto --with-crypto --with-zlib --with-pcre --enable-modules=most --enable-mpms-shared=all --with-event</span><br><span class="line">~]# make &amp;&amp; make install</span><br><span class="line">~]# cd /usr/local</span><br><span class="line">~]# ln -sv httpd-2.4.33/ httpd</span><br></pre></td></tr></table></figure>
<p><strong>5)导出环境变量</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# echo &quot;export PATH=/usr/local/httpd/bin:\$PATH&quot; &gt;&gt; /etc/profile.d/env.s</span><br></pre></td></tr></table></figure>
<p><strong>6)修改配置文件</strong><br>        ~]# vim /etc/httpd24/httpd.conf<br>            取消servername的注释,<br>            注释以下三个模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadModule session_cookie_module modules/mod_session_cookie.so</span><br><span class="line">LoadModule session_crypto_module modules/mod_session_crypto.so</span><br><span class="line">LoadModule session_dbd_module modules/mod_session_dbd.so</span><br></pre></td></tr></table></figure>
<p><strong>7)启动服务</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# httpd -k start</span><br></pre></td></tr></table></figure>
<h3 id="4-安装MariaDB-通用二进制格式安装"><a href="#4-安装MariaDB-通用二进制格式安装" class="headerlink" title="4.安装MariaDB(通用二进制格式安装):"></a>4.安装MariaDB(通用二进制格式安装):</h3><p><strong>1)复制软件包</strong>        </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~]# cd /usr/local/src</span><br><span class="line">~]# cp mariadb</span><br><span class="line">~]# mv mariadb-10.2.15-linux-x86_64/ /usr/local/mysql</span><br><span class="line">~]# cd /usr/local/mysql</span><br></pre></td></tr></table></figure>
<p><strong>2)创建用户</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# groupadd -r -g 306 mysql</span><br><span class="line">		~]# useradd -r -g 306 -u 306 -s /sbin/nologin -d /data/mysqldb -k /dev/null -m mysql</span><br></pre></td></tr></table></figure>
<p><strong>3)生成数据库</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# scripts/mysql_install_db --datadir=/data/mysqldb --user=mysql</span><br></pre></td></tr></table></figure>
<p><strong>4)配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~]# cp support-files/my-huge.cnf /etc/my.cnf</span><br><span class="line">~]# vim /etc/my.cnf</span><br><span class="line">	innodb_file_per_table</span><br><span class="line">	datadir = /data/mysqldb</span><br></pre></td></tr></table></figure>
<p><strong>5)启动脚本</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">~]# cp support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">~]# vim /etc/init.d/mysqld</span><br><span class="line">	# 修改相关路径</span><br><span class="line">	basedir=&apos;/usr/local/mysql&apos;</span><br><span class="line">	datadir=&apos;/data/mysqldb&apos;</span><br><span class="line">	mysqld_pid_file_path=&quot;/usr/local/mysql/var/mysqld.pid&quot;</span><br><span class="line">~]# mkdir var</span><br><span class="line">~]# chown mysql.mysql var</span><br><span class="line">~]# chkconfig --add mysqld</span><br><span class="line">~]# chkconfig mysqld on</span><br><span class="line">~]# service mysqld start</span><br></pre></td></tr></table></figure>
<p><strong>6)导出环境变量</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# echo &quot;export PATH=/usr/local/mysql/bin:\$PATH&quot; &gt;&gt; /etc/profile.d/env.sh</span><br></pre></td></tr></table></figure>
<p><strong>7)执行初始化安全脚本</strong>,创建root密码,删除测试数据,删除匿名账号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# mysql_secure_installation</span><br></pre></td></tr></table></figure>
<p><strong>8)导出库文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~]# ln -sv /usr/local/mysql/include/ /usr/include/mysql/</span><br><span class="line">~]# echo &quot;/usr/local/mysql/lib&quot; &gt;&gt; /etc/ld.so.conf.d/mysql.conf</span><br><span class="line">~]# ldconfig -v</span><br><span class="line">~]# vim /etc/man.config</span><br><span class="line">	MANPATH /usr/local/mysql/man/</span><br></pre></td></tr></table></figure>
<h3 id="5-编译PHP-5-6"><a href="#5-编译PHP-5-6" class="headerlink" title="5.编译PHP-5.6"></a>5.编译PHP-5.6</h3><p>~]# cd /usr/local/src/php-5.6.36<br><strong>1)安装依赖包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# yum -y install libxml2-devel bzip2-devel curl-devel libjpeg-devel libpng-devel freetype-devel libmcrypt-devel</span><br></pre></td></tr></table></figure>
<p><strong>2)编译安装</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# ./configure --prefix=/usr/local/php-5.6.36 --with-mysql-sock=/tmp/mysql.sock --with-openssl --enable-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --with-gettext --enable-bcmath --enable-sockets --with-apxs2=/usr/local/httpd/bin/apxs --with-mcrypt --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --enable-exif --with-bz2 --with-curl --enable-zip --with-gd --enable-fpm --with-pdo-mysql --with-mysqli --with-fpm-user=httpd --with-fpm-group=httpd --enable-opcache  --enable-opcache-file</span><br><span class="line">~]# make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p><strong>3)配置文件</strong>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">~]# cp php.ini-production /etc/php.ini</span><br><span class="line">~]# vim /etc/httpd24/httpd.conf</span><br><span class="line">	# 加入首页文件名</span><br><span class="line">	&lt;IfModule dir_module&gt;</span><br><span class="line">		DirectoryIndex index.php index.html</span><br><span class="line">	&lt;/IfModule&gt;</span><br><span class="line"># 指定以.php结尾的文件交由PHP处理</span><br><span class="line">AddType application/x-httpd-php .php</span><br><span class="line">~]# cd /usr/local</span><br><span class="line">~]# ln -sv php-5.6.36 php</span><br><span class="line">~]# httpd -k restart</span><br><span class="line">~]# vim /usr/local/httpd/htdocs/info.php</span><br><span class="line">	&lt;?php</span><br><span class="line">		phpinfo();</span><br><span class="line">	?&gt;</span><br></pre></td></tr></table></figure>
<p>​        在浏览器访问 <a href="http://server_ip/info.php" target="_blank" rel="noopener">http://server_ip/info.php</a></p>
<h3 id="6-编译xcache"><a href="#6-编译xcache" class="headerlink" title="6.编译xcache"></a>6.编译xcache</h3><p>~]# cd /usr/local/src/xcache-3.2.0<br><strong>1)生成configure文件</strong><br>        ~]# /usr/local/php/bin/phpize<br><strong>2)编译</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~]# ./configure --prefix=/usr/local/xcache-3.2.0 --enable-xcache --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line">~]# make &amp;&amp; make install</span><br><span class="line">~]# mkdir /etc/php.d </span><br><span class="line">~]# cp xcache.ini /etc/php.d/</span><br><span class="line">~]# httpd -k restart</span><br></pre></td></tr></table></figure>
<h3 id="7-安装phpmyadmin"><a href="#7-安装phpmyadmin" class="headerlink" title="7.安装phpmyadmin"></a>7.安装phpmyadmin</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~]# cd /usr/local/src</span><br><span class="line">~]# wget https://files.phpmyadmin.net/phpMyAdmin/4.8.1/phpMyAdmin-4.8.1-all-languages.zip</span><br><span class="line">~]# unzip phpMyAdmin-4.8.1-all-languages.zip </span><br><span class="line">~]# mv phpMyAdmin-4.8.1-all-languages /usr/local/httpd/htdocs/pam</span><br><span class="line">~]# cd /usr/local/httpd/htdocs/pam</span><br><span class="line">~]# cp config.sample.inc.php config.inc.php</span><br><span class="line">~]# vim config.inc.php</span><br><span class="line">	# 修改cookie加密值</span><br><span class="line">	$cfg[&apos;blowfish_secret&apos;] = &apos;jw7elr8ds2sdj39us32djf9886&apos;;</span><br><span class="line">~]# cd ..</span><br><span class="line">~]# chown -R httpd.httpd pam/ </span><br><span class="line">~]# chmod -R 700 pam/</span><br></pre></td></tr></table></figure>
<h3 id="8-使用php-fpm"><a href="#8-使用php-fpm" class="headerlink" title="8.使用php-fpm"></a>8.使用php-fpm</h3><p>​    修改httpd主配置文件,启用代理和CGI模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LoadModule proxy_module modules/mod_proxy.so</span><br><span class="line">LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span><br></pre></td></tr></table></figure>
<p>​    加入配置项,将所有.php结尾的请求转发给php-fpm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DirectoryIndex index.php</span><br><span class="line">ProxyRequests Off</span><br><span class="line">ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/var/www/html/$1</span><br></pre></td></tr></table></figure>
<p><strong>配置PHP</strong>,创建php-fpm配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">~]# cp /usr/local/php/etc/php-fpm.d/www.conf.default /usr/local/php/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>
<p>以上两个文件中可以配置PHP-fpm的特性,包括监听端口,允许连接的主机,日志等等<br>启动脚本,PHP源码编译完成后会生成两个启动脚本,可以用于SysV和systemd    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~]# cp /usr/local/src/php-5.6.36/sapi/fpm/init.d-php-fpm /etc/init.d/php-fpm</span><br><span class="line">~]# chmod +x /etc/init.d/php-fpm</span><br><span class="line">~]# chkconfig --add php-fpm</span><br><span class="line">~]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure>
<p><strong>使httpd使用socket文件连接php-fpm</strong><br>修改ProxyPassMatch    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ProxyPassMatch ^(.*\.php)$ unix:/var/run/php-fpm.sock|fcgi://localhost/data/webapps/</span><br></pre></td></tr></table></figure>
<p><strong>修改php-fpm的<a href="http://www.conf配置文件" target="_blank" rel="noopener">www.conf配置文件</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">listen = /var/run/php-fpm.sock</span><br><span class="line">listen.owner = httpd</span><br><span class="line">listen.group = httpd</span><br></pre></td></tr></table></figure>
<h3 id="9-测试"><a href="#9-测试" class="headerlink" title="9.测试"></a>9.测试</h3><p>​    分别开启,关闭xcache功能进行测试,开启xcache后性能大概提高了三倍(仅是测试)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~]# ab -c 10 -n 1000 http://192.168.132.80/pam/index.php</span><br></pre></td></tr></table></figure>
<p>关闭xcache,修改/etc/php.d/xcache.ini将加载的模块注释即可</p>
<h3 id="10-lamp的几点优化"><a href="#10-lamp的几点优化" class="headerlink" title="10.lamp的几点优化"></a>10.lamp的几点优化</h3><p><strong>1)开启压缩功能</strong><br>    修改/etc/httpd24/httpd.conf文件,将压缩模块开启,并加入下面的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LoadModule deflate_module modules/mod_deflate.so</span><br><span class="line">		&lt;IfModule deflate_module&gt;</span><br><span class="line">		        Include /etc/httpd24/extra/httpd-deflate.conf</span><br><span class="line">		&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<p><strong>2)配置可压缩的文件类型</strong><br>    创建配置文件/etc/httpd24/extra/httpd-deflate.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AddOutputFilterByType DEFLATE text/plain</span><br><span class="line">AddOutputFilterByType DEFLATE text/html</span><br><span class="line">AddOutputFilterByType DEFLATE text/xml</span><br><span class="line">AddOutputFilterByType DEFLATE text/javascript</span><br><span class="line">AddOutputFilterByType DEFLATE text/css</span><br><span class="line">AddOutputFilterByType DEFLATE application/xhtml+xml</span><br><span class="line"></span><br><span class="line">DeflateCompressionLevel 9</span><br></pre></td></tr></table></figure>
<p><strong>3)开启sendfile功能</strong><br>    修改主配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EnableSendfile on</span><br></pre></td></tr></table></figure>
<p><strong>4)调整mpm参数</strong><br>    取消主配置文件对mpm配置引入的注释<br>    Include /etc/httpd24/extra/httpd-mpm.conf<br><strong>5)关闭http头中版本的显示</strong><br>    修改/etc/httpd24/extra/httpd-default.conf,注意在主配置文件中include该文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerTokens Prod</span><br><span class="line">	ServerSignature Off</span><br></pre></td></tr></table></figure>
<p>​    修改/etc/php.ini</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expose_php = Off</span><br></pre></td></tr></table></figure>
<h3 id="11-虚拟主机"><a href="#11-虚拟主机" class="headerlink" title="11.虚拟主机"></a>11.虚拟主机</h3><p><strong>基于主机名</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">	        DocumentRoot &quot;/data/webapps/dis&quot;</span><br><span class="line">	        ServerName dis.smartyhero.com</span><br><span class="line">	        &lt;Directory &quot;/data/webapps/dis&quot;&gt;</span><br><span class="line">	                Require all granted</span><br><span class="line">	        &lt;/Directory&gt;</span><br><span class="line">	        ErrorLog &quot;logs/dis-error.log&quot;</span><br><span class="line">	        CustomLog &quot;logs/dis-access.log&quot; combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><strong>基于ip</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 1.2.3.4:80&gt;</span><br><span class="line">	        DocumentRoot &quot;/data/webapps/dis&quot;</span><br><span class="line">	        &lt;Directory &quot;/data/webapps/dis&quot;&gt;</span><br><span class="line">	                Require all granted</span><br><span class="line">	        &lt;/Directory&gt;</span><br><span class="line">	        ProxyPassMatch ^(.*\.php)$ fcgi://192.168.132.80:9000/data/webapps/dis/$1</span><br><span class="line">	        ErrorLog &quot;logs/dis-error.log&quot;</span><br><span class="line">	        CustomLog &quot;logs/dis-access.log&quot; combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><strong>基于端口</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:88&gt;</span><br><span class="line">        DocumentRoot &quot;/data/webapps/dis&quot;</span><br><span class="line">        ServerName dis.smartyhero.com</span><br><span class="line">        &lt;Directory &quot;/data/webapps/dis&quot;&gt;</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">        ProxyPassMatch ^(.*\.php)$ fcgi://192.168.132.80:9000/data/webapps/dis/$1</span><br><span class="line">        ErrorLog &quot;logs/dis-error.log&quot;</span><br><span class="line">        CustomLog &quot;logs/dis-access.log&quot; combined</span><br><span class="line">	&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h3 id="12-搭建私有CA-及利用其申请证书"><a href="#12-搭建私有CA-及利用其申请证书" class="headerlink" title="12.搭建私有CA,及利用其申请证书"></a>12.搭建私有CA,及利用其申请证书</h3><p><strong>1)自建根CA</strong><br>        生成私钥<code>(umask 077; openssl genrsa -out /etc/pki/CA/private/cakey.pem 4096)</code></p>
<p>​        自签名证书<code>openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem -out /etc/pki/CA/cacert.pem -days 3650</code><br><strong>2):生成证书数据库文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# touch /etc/pki/CA/index.txt</span><br><span class="line">~]# echo 01 &gt; /etc/pki/CA/serial</span><br></pre></td></tr></table></figure>
<p>​        以上两个文件位置来自于/etc/pki/tls/openssl.cnf配置文件中的database项和serial项<br><strong>3)生成自己私钥</strong><code>(umask 077;openssl genrsa -out mypri.key 2048)</code><br><strong>4)生成请求签发的文件</strong> <code>openssl req -new -key mypri.key -out mypri.csr</code><br><strong>5)将请求文件发送给ca使其通过请求文件颁发证书</strong><code>openssl ca -in mypri.csr -out pub.crt -days 365</code><br>    /etc/pki/tls/openssl.cnf:CA相关配置文件</p>
<h3 id="13-配置HTTPS"><a href="#13-配置HTTPS" class="headerlink" title="13.配置HTTPS"></a>13.配置HTTPS</h3><p><strong>1.打开需要使用到的模块</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LoadModule cache_module modules/mod_cache.so</span><br><span class="line">LoadModule cache_socache_module modules/mod_cache_socache.so</span><br><span class="line">LoadModule socache_shmcb_module modules/mod_socache_shmcb.so	</span><br><span class="line">LoadModule ssl_module modules/mod_ssl.so</span><br></pre></td></tr></table></figure>
<p>​    include extra/httpd-ssl.conf文件</p>
<p><strong>修改虚拟主机</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:443&gt;</span><br><span class="line">    DocumentRoot &quot;/data/webapps/dis&quot;</span><br><span class="line">    ServerName dis.smartyhero.com</span><br><span class="line">    &lt;Directory &quot;/data/webapps/dis&quot;&gt;</span><br><span class="line">            Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">    SSLEngine on</span><br><span class="line">    SSLCertificateFile &quot;/public/key/file&quot;</span><br><span class="line">    SSLCertificateKeyFile &quot;/private/key/file&quot;</span><br><span class="line"></span><br><span class="line">    ProxyPassMatch ^(.*\.php)$ fcgi://192.168.132.80:9000/data/webapps/dis/$1</span><br><span class="line">    ErrorLog &quot;logs/dis-error.log&quot;</span><br><span class="line">    CustomLog &quot;logs/dis-access.log&quot; combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><strong>将访问http的请求也转发到HTTPS</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName wp.smartyhero.com</span><br><span class="line">    RedirectMatch ^(.*)$ https://wp.smartyhero.com$1</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><strong>httpd服务器启动脚本</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># chkconfig: 345 96 04</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line">PREFIX=<span class="string">'/usr/local/httpd-2.2/'</span></span><br><span class="line">LOCK_PATH=<span class="string">'/var/lock/subsys/'</span></span><br><span class="line">SERVER_NAME=<span class="string">"httpd"</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">	[ -f <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span> ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="variable">$SERVER_NAME</span> is running...; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line">	<span class="built_in">echo</span> -n <span class="string">"Starting <span class="variable">$SERVER_NAME</span> ..."</span></span><br><span class="line">	<span class="string">"<span class="variable">$PREFIX</span>"</span>bin/httpd -k start</span><br><span class="line">	<span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		touch <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span></span><br><span class="line">		action</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		action /bin/<span class="literal">false</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">	[ -f <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span> ] || &#123; <span class="built_in">echo</span> <span class="variable">$SERVER_NAME</span> is not running...; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line">	<span class="built_in">echo</span> -n <span class="string">"Stoping <span class="variable">$SERVER_NAME</span>"</span></span><br><span class="line">	<span class="string">"<span class="variable">$PREFIX</span>"</span>bin/httpd -k stop</span><br><span class="line">	<span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		rm -rf <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span></span><br><span class="line">		action</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		rm -rf <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span></span><br><span class="line">		action /bin/<span class="literal">false</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">status</span></span>()&#123;</span><br><span class="line">	<span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span> ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$SERVER_NAME</span> is running"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$SERVER_NAME</span> is not running"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">restart</span></span>()&#123;</span><br><span class="line">	[ -f <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span> ] || &#123; <span class="built_in">echo</span> <span class="variable">$SERVER_NAME</span> is not running...; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line">	<span class="built_in">echo</span> -n <span class="string">"Restarting <span class="variable">$SERVER_NAME</span> ..."</span></span><br><span class="line">	<span class="string">"<span class="variable">$Misplaced</span> &amp;PREFIX"</span>bin/httpd -k stop &amp;&amp; <span class="string">"<span class="variable">$PREFIX</span>"</span>/bin/httpd -k start &amp;&amp; action||action <span class="string">""</span> /bin/<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">reload</span></span>()&#123;</span><br><span class="line">	[ -f <span class="string">"<span class="variable">$LOCK_PATH</span><span class="variable">$SERVER_NAME</span>"</span> ] || &#123; <span class="built_in">echo</span> <span class="variable">$SERVER_NAME</span> is not running...; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line">	<span class="built_in">echo</span> -n <span class="string">"Reloading <span class="variable">$SERVER_NAME</span> ..."</span></span><br><span class="line">	pkill -1 <span class="variable">$SERVER_NAME</span> &amp;&amp; action || action /bin/<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">	start</span><br><span class="line">	;;</span><br><span class="line">stop)</span><br><span class="line">	stop	</span><br><span class="line">	;;</span><br><span class="line">status)</span><br><span class="line"> 	status</span><br><span class="line">	;;</span><br><span class="line">restart)</span><br><span class="line">	restart</span><br><span class="line">	;;</span><br><span class="line">reload)</span><br><span class="line">	reload</span><br><span class="line">	;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|status|reload|configtest&#125;"</span></span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p>

      
    </div>

    

    
    
    

    
    <div align="center">
      
        <div class="copyright">
        <p><span>
        <b>本文地址：</b><a href="/2018/07/24/lamp/" title="lamp环境搭建">http://smartyhero.com/2018/07/24/lamp/</a><br/><b>转载请注明出处，谢谢！</b>
        </span></p>
        </div>
      
    </div>

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a>
          
            <a href="/tags/lamp/" rel="tag"><i class="fa fa-tag"></i> lamp</a>
          
            <a href="/tags/php-fpm/" rel="tag"><i class="fa fa-tag"></i> php-fpm</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/12/keepalived-ipvs-haproxy/" rel="next" title="使用keepalived高可用ipvs和haproxy">
                <i class="fa fa-chevron-left"></i> 使用keepalived高可用ipvs和haproxy
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/dabai.jpg"
                alt="朱大白" />
            
              <p class="site-author-name" itemprop="name">朱大白</p>
              <p class="site-description motion-element" itemprop="description">试图不断调战自己舒适区的人</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/zhudabai" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:uuidxiaozhu@163.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-下载软件包"><span class="nav-number">1.</span> <span class="nav-text">1.下载软件包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-解压所有软件包"><span class="nav-number">2.</span> <span class="nav-text">2.解压所有软件包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-安装Apache"><span class="nav-number">3.</span> <span class="nav-text">3.安装Apache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-安装MariaDB-通用二进制格式安装"><span class="nav-number">4.</span> <span class="nav-text">4.安装MariaDB(通用二进制格式安装):</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-编译PHP-5-6"><span class="nav-number">5.</span> <span class="nav-text">5.编译PHP-5.6</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-编译xcache"><span class="nav-number">6.</span> <span class="nav-text">6.编译xcache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-安装phpmyadmin"><span class="nav-number">7.</span> <span class="nav-text">7.安装phpmyadmin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-使用php-fpm"><span class="nav-number">8.</span> <span class="nav-text">8.使用php-fpm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-测试"><span class="nav-number">9.</span> <span class="nav-text">9.测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-lamp的几点优化"><span class="nav-number">10.</span> <span class="nav-text">10.lamp的几点优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-虚拟主机"><span class="nav-number">11.</span> <span class="nav-text">11.虚拟主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-搭建私有CA-及利用其申请证书"><span class="nav-number">12.</span> <span class="nav-text">12.搭建私有CA,及利用其申请证书</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-配置HTTPS"><span class="nav-number">13.</span> <span class="nav-text">13.配置HTTPS</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">朱大白</span>

  

  
</div>




  <div class="powered-by"><a class="theme-link" target="_blank" href=""></a> 雾里看花</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">水中望月




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.2.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.2.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.2.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
